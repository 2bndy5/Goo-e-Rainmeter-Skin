[Rainmeter]
Update=250
DefaultUpdateDivider=4
dynamicwindowsize=1
MouseScrollUpAction=[!CommandMeasure mAudio "ChangeVolume 3"]
MouseScrollDownAction=[!CommandMeasure mAudio "ChangeVolume -3"]
oncloseAction=[!CommandMeasure resizeKnob kill]
ContextTitle="Neon Preset"
ContextAction=[!WriteKeyValue Variables theme "Neon"][!refresh]
ContextTitle2="Marshal Preset"
ContextAction2=[!WriteKeyValue Variables theme "SpinalTap"][!WriteKeyValue Variables BgColor 255,255,105][!WriteKeyValue Variables CurrentColor 255,255,255][!WriteKeyValue Variables FontColor 0,0,0][!refresh]

[Variables]
IconSize=165
previousSize=165
BGcolor=255,255,105
ColorAlpha=FF
SizeAlpha=00
SettingsAlpha=00
CurrentColor=255,255,255
FontColor=0,0,0
MouseX=66
MouseY=11
WinColors=1
VolumeAlpha=1
theme=SpinalTap

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;Measures~~~~~~~~~~~~~~~~~~~~~~~
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
@include2="#@#\WinColor.inc"
ButtonColor=136,52,26
Alpha=158

[MeasureWinVar]
measure=plugin
Plugin=SysInfo
SysInfoType=OS_VERSION
dynamicVariables=1
updateDivider=-1
ifConditionMode=1
ifCondition=#WinColors# = 0
ifTrueAction=[!SetVariable BGColor #Palette5#][!SetVariable CurrentColor #Palette4#][!SetVariable ButtonColor #Palette3#]

[Xpos]
measure=calc
dynamicVariables=1
updateDivider=-1
formula=#MouseX# - (#IconSize# / 2)
group=MousePos

[Ypos]
measure=calc
dynamicVariables=1
updateDivider=-1
formula=-(#MouseY# - (#IconSize# / 2))
group=MousePos

[Radius]
measure=calc
dynamicVariables=1
updateDivider=-1
formula=sqrt(Xpos ** 2 + Ypos ** 2)
group=MousePos

[quad]
measure=calc
dynamicVariables=1
updateDivider=-1
formula=(xpos >= 0) && (ypos >= 0) ? 1 : ((xpos <= 0) && (ypos >= 0) ? 2 : ((xpos <= 0) && (ypos <= 0) ? 3 : ((xpos >= 0) && (ypos <= 0) ? 4 : 0 ) ) )
group=MousePos

[RefAngle]
measure=calc
dynamicVariables=1
updateDivider=-1
formula=abs(asin(ypos / radius))
group=MousePos

[MinMaxRef]
measure=calc
dynamicVariables=1
updateDivider=-1
formula=rad(53.96)
group=MousePos

[TranslateMousePos2Volume]
measure=calc
dynamicVariables=1
updateDivider=-1
formula=round((quad = 3 ? (MinMaxRef - RefAngle) / rad(287.92) : (quad = 2 ? (MinMaxRef + RefAngle) / rad(287.92) : (quad = 1 ? (MinMaxRef + (rad(180) - RefAngle)) / rad(287.92) : (MinMaxRef + rad(180) + RefAngle) / rad(287.92)))) * 100)
MinValue=0
MaxValue=100
group=MousePos
ifconditionmode=1
ifcondition=(radius >= (#IconSize# / 2 - (#iconSize# / 2 * 0.4))) && (radius <= #iconSize# / 2)
ifTrueAction=[!commandMeasure mAudio "setVolume [TranslateMousePos2Volume]"]

[ResizeKnob]
measure=plugin
plugin=RunCommand
program=""#@#Addons\convert.exe""
Parameter=""#@#images\Volume\Knob.png" -resize #iconSize#x#IconSize#! "#@#Images\Volume\Vknob.png""
State=hide
DynamicVariables=1
FinishAction=[!CommandMeasure ResizeNeonKnob Run]
ifcondition=#IconSize# = #previousSize#
ifFalseAction=[!CommandMeasure ResizeKnob Run][!writekeyvalue Variables previousSize #iconSize#]

[ResizeNeonKnob]
measure=plugin
plugin=RunCommand
program=""#@#Addons\convert.exe""
Parameter=""#@#images\Volume\KnobNeon.png" -resize #iconSize#x#IconSize#! "#@#Images\Volume\VneonKnob.png""
State=hide
DynamicVariables=1
FinishAction=[!CommandMeasure ResizeGlare Run]
ifcondition=#IconSize# = #previousSize#
ifFalseAction=[!CommandMeasure ResizeKnob Run][!writekeyvalue Variables previousSize #iconSize#]

[ResizeGlare]
measure=plugin
plugin=RunCommand
program=""#@#Addons\convert.exe""
Parameter=""#@#images\Volume\Glare.png" -resize #iconSize#x#IconSize#! "#@#Images\Volume\Vglare.png""
State=hide
DynamicVariables=1
FinishAction=[!refresh]

[mTime]
Measure=Time

[mAudio]
Measure=Plugin
Plugin=Win7AudioPlugin

[mInputSize]
Measure=Plugin
Plugin=InputText
dynamicvariables=1
SolidColor=255,255,255
FontColor=0,0,0
FontFace=Arial
FontSize=(#IconSize#*18/256)
StringAlign=center
X=(#IconSize#/2-(#IconSize#*0.15))
y=(#IconSize#-(#IconSize#*0.3))
w=(#IconSize#*0.3)
h=(#IconSize#*0.3)
DynamicVariables=1
focusdismiss=1
DefaultValue="#IconSize#"
InputNumber=1
Command1=[!writekeyvalue variables IconSize "$UserInput$"][!refresh]

@include3="#@#\VKnobStyles.inc"

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;Meters~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

[BG]
meter=image
greyScale=1
ImageTint=#BGColor#
imageAlpha=#Alpha#
meterStyle=WidthHeight | #theme#style#CurrentSection#
Antialias=1
mouseoveraction=[!setOption #CurrentSection# imageAlpha "255"][!redraw]
mouseleaveaction=[!setOption #CurrentSection# imageAlpha #Alpha#][!redraw]
leftMouseUpAction=[!SetVariable MouseX $MouseX$][!SetVariable MouseY $MouseY$][!UpdateMeasureGroup MousePos][!writeKeyValue Variables MouseX $MouseX$][!writeKeyValue Variables MouseY $MouseY$]

[Knob]
Meter=ROTATOR
measurename=mAudio
greyscale=1
imagetint=#CurrentColor#
meterStyle=WidthHeight | #theme#style#CurrentSection#
StartAngle=-2.5133
RotationAngle=5.0265
OffsetX=(#IconSize#/2)
Offsety=(#IconSize#/2)
Antialias=1

[Glare]
Meter=ROTATOR
measurename=mTime
imagename="#@#images\Volume\Vglare.png"
greyscale=1
imagetint=#CurrentColor#
ValueRemainder=43200
OffsetX=(#IconSize#/2)
Offsety=(#IconSize#/2)
meterStyle=WidthHeight | #theme#style#CurrentSection#
Antialias=1

[SizeBlank]
shape=Rectangle 0,0,[#CurrentSection#:W],[#CurrentSection#:H] | StrokeWidth 0 | Fill Color 0,0,0,1

[Size]
ButtAttributes=StrokeWidth ((([#CurrentSection#:W]+[#CurrentSection#:H])/2)*0.065) | StrokeColor #ButtonColor# | Fill Color 0,0,0,1
shape=Line ([#CurrentSection#:W]*0.835),([#CurrentSection#:H]*0.16),([#CurrentSection#:W]*0.15),([#CurrentSection#:H]*0.845) | Extend ButtAttributes | StrokeStartCap Triangle | StrokeEndCap Triangle
shape2=Path ArrowBottom | Extend ButtAttributes
ArrowBottom=([#CurrentSection#:W]*0.095),([#CurrentSection#:H]*0.62) | LineTo ([#CurrentSection#:W]*0.095),([#CurrentSection#:H]*0.895) | LineTo ([#CurrentSection#:W]*0.38),([#CurrentSection#:H]*0.895)
shape3=path ArrowTop | Extend ButtAttributes
ArrowTop=([#CurrentSection#:W]*0.61),([#CurrentSection#:H]*0.1075) | LineTo ([#CurrentSection#:W]*0.885),([#CurrentSection#:H]*0.1075) | LineTo ([#CurrentSection#:W]*0.885),([#CurrentSection#:H]*0.385)
shape4=Rectangle 0,0,[#CurrentSection#:W],[#CurrentSection#:H] | StrokeWidth 0 | Fill Color 0,0,0,1

[SetSize]
meter=shape
DynamicVariables=1
X=(round(#IconSize#*0.33))
y=(round(#IconSize#*0.66))
w=(round(#IconSize#*0.33))
h=(round(#IconSize#*0.33))
updateDivider=2
meterstyle=SizeBlank
MouseOverAction=[!setOption #CurrentSection# MeterStyle Size][!redraw]
MouseLeaveAction=[!setOption #CurrentSection# MeterStyle SizeBlank][!redraw]
leftmouseupaction=[!commandmeasure mInputSize "executebatch 1"]

[SettingBlank]
shape=Rectangle 0,0,[#CurrentSection#:W],[#CurrentSection#:H] | StrokeWidth 0 | Fill Color 0,0,0,1

[Setting]
ButtAttributes=StrokeWidth ((([#CurrentSection#:W]+[#CurrentSection#:H])/2)*0.065) | StrokeColor #ButtonColor# | Fill Color 0,0,0,1
shape=Ellipse ([#CurrentSection#:W]*0.5),([#CurrentSection#:H]*0.5),([#CurrentSection#:W]*0.15),([#CurrentSection#:H]*0.15) | Extend ButtAttributes
shape2=Path Teeth | Extend ButtAttributes
Teeth=([#CurrentSection#:W]*0.39),([#CurrentSection#:H]*0.05) | LineTo ([#CurrentSection#:W]*0.46),([#CurrentSection#:H]*0.16) | LineTo ([#CurrentSection#:W]*0.54),([#CurrentSection#:H]*0.16) | LineTo ([#CurrentSection#:W]*0.6),([#CurrentSection#:H]*0.05) | LineTo ([#CurrentSection#:W]*0.75),([#CurrentSection#:H]*0.1) | LineTo ([#CurrentSection#:W]*0.715),([#CurrentSection#:H]*0.24) | LineTo ([#CurrentSection#:W]*0.77),([#CurrentSection#:H]*0.29) | LineTo ([#CurrentSection#:W]*0.9),([#CurrentSection#:H]*0.25) | LineTo ([#CurrentSection#:W]*0.96),([#CurrentSection#:H]*0.4) | LineTo ([#CurrentSection#:W]*0.835),([#CurrentSection#:H]*0.47) | LineTo ([#CurrentSection#:W]*0.835),([#CurrentSection#:H]*0.54) | LineTo ([#CurrentSection#:W]*0.955),([#CurrentSection#:H]*0.615) | LineTo ([#CurrentSection#:W]*0.89),([#CurrentSection#:H]*0.76) | LineTo ([#CurrentSection#:W]*0.76),([#CurrentSection#:H]*0.72) | LineTo ([#CurrentSection#:W]*0.715),([#CurrentSection#:H]*0.77) | LineTo ([#CurrentSection#:W]*0.745),([#CurrentSection#:H]*0.91) | LineTo ([#CurrentSection#:W]*0.61),([#CurrentSection#:H]*0.96) | LineTo ([#CurrentSection#:W]*0.53),([#CurrentSection#:H]*0.85) | LineTo ([#CurrentSection#:W]*0.46),([#CurrentSection#:H]*0.85) | LineTo ([#CurrentSection#:W]*0.39),([#CurrentSection#:H]*0.96) | LineTo ([#CurrentSection#:W]*0.25),([#CurrentSection#:H]*0.91) | LineTo ([#CurrentSection#:W]*0.28),([#CurrentSection#:H]*0.77) | LineTo ([#CurrentSection#:W]*0.24),([#CurrentSection#:H]*0.725) | LineTo ([#CurrentSection#:W]*0.1),([#CurrentSection#:H]*0.755) | LineTo ([#CurrentSection#:W]*0.04),([#CurrentSection#:H]*0.615) | LineTo ([#CurrentSection#:W]*0.16),([#CurrentSection#:H]*0.535) | LineTo ([#CurrentSection#:W]*0.16),([#CurrentSection#:H]*0.48) | LineTo ([#CurrentSection#:W]*0.04),([#CurrentSection#:H]*0.4) | LineTo ([#CurrentSection#:W]*0.1),([#CurrentSection#:H]*0.26) | LineTo ([#CurrentSection#:W]*0.23),([#CurrentSection#:H]*0.28) | LineTo ([#CurrentSection#:W]*0.28),([#CurrentSection#:H]*0.24) | LineTo ([#CurrentSection#:W]*0.25),([#CurrentSection#:H]*0.105) | ClosePath 1
shape3=Combine Shape2 | Exclude shape
shape4=Rectangle 0,0,[#CurrentSection#:W],[#CurrentSection#:H] | StrokeWidth 0 | Fill Color 0,0,0,1

[settingsbutt]
meter=shape
DynamicVariables=1
x=(round(#IconSize#*0.33))
y=(round(#IconSize#*0.33))
w=(round(#IconSize#*0.33))
h=(round(#IconSize#*0.33))
updateDivider=2
MeterStyle=SettingBlank
MouseOverAction=[!setOption #CurrentSection# MeterStyle Setting][!redraw]
MouseLeaveAction=[!setOption #CurrentSection# MeterStyle SettingBlank][!redraw]
LeftMouseupAction=[!ToggleConfig "#CurrentConfig#\Setting" "#CURRENTFILE#"][!move "(#WorkAreaWidth#-(#CurrentConfigX#+#CurrentConfigWidth#)>=520?(#CurrentConfigX#+#IconSize#):(#CurrentConfigX#-520))" "(#WorkAreaHeight#-#CurrentConfigY#>=404?(#CurrentConfigY#):(#WorkAreaHeight#-404))" "#CurrentConfig#\Setting"]
