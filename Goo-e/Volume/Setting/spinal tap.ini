[Rainmeter]
update=1000
backgroundMode=2
solidcolor=40,40,40,170
onRefreshAction=[!updateMeasure mCalcRGB][!commandMeasure mCalcRGB "HSVtoRGB()"]
mouseLeaveAction=[!HideMeter AdjustAlpha]

[Variables]
ButtonColor=136,52,26
knobColor=248,227,195
BGColor=250,250,124
numbersColor=0,0,0
WinColors=1
bgAlpha=158
@include="#@#ColorPickerCommon.inc"

[ScriptButtonBG]
measure=script
DynamicVariables=1
ScriptFile="#@#CalcButtonBG.lua"
Percent=0.45
Color1=#ButtonColor#
Color2=#knobColor#
Color3=#bgColor#
Color4=#numbersColor#
Color5=#bgColor#
Color6=#bgColor#

[setButton]
meter=string
X=([SatAndVal:X]+[SatAndVal:W]+5)
y=([SatAndVal:Y]+25)
w=150
h=50
text="Button"
clipstring=2
fontColor=#ButtonColor#
solidColor=#ShadedColor1#
stringAlign=LeftCenter
fontSize=#SettingsFontSize#
FontFace=#SettingsFontFace#
dynamicVariables=1
leftMouseUpAction=[!WriteKeyValue Variables ButtonColor #ActiveRGB#][!SetVariable ButtonColor #ActiveRGB#][!SetVariable ButtonColor #ActiveRGB# "#RootConfig#\Volume"][!writeKeyValue Variables ButtonColor #ActiveRGB# "#RootConfigPath#Volume\spinal tap.ini"][!update "#RootConfig#\Volume"][!redraw]
rightMouseUpAction=[!commandMeasure mCalcRGB "RGBtoHSV('#ButtonColor#')"][!updateMeasure mCalcRGB]

[setKnob]
meter=string
x=r
y=([setButton:H])r
w=([setButton:W])
h=([setButton:H])
text="Knob"
fontColor=#knobColor#
solidColor=#ShadedColor2#
stringAlign=LeftCenter
fontSize=#SettingsFontSize#
FontFace=#SettingsFontFace#
dynamicVariables=1
leftMouseUpAction=[!WriteKeyValue Variables knobColor #ActiveRGB#][!SetVariable knobColor #ActiveRGB#][!SetVariable knobColor #ActiveRGB# "#RootConfig#\Volume"][!writeKeyValue Variables knobColor #ActiveRGB# "#RootConfigPath#Volume\spinal tap.ini"][!Update "#RootConfig#\Volume"][!redraw]
rightMouseUpAction=[!commandMeasure mCalcRGB "RGBtoHSV('#knobColor#')"][!updateMeasure mCalcRGB]

[setBG]
meter=string
x=r
y=([setKnob:H])r
w=([setKnob:W])
h=([setKnob:H])
text="Background"
clipstring=2
fontColor=#BGColor#
solidColor=#ShadedColor3#
stringAlign=LeftCenter
fontSize=#SettingsFontSize#
FontFace=#SettingsFontFace#
dynamicVariables=1
leftMouseUpAction=[!WriteKeyValue Variables BGColor #ActiveRGB#][!SetVariable BGColor #ActiveRGB#][!SetVariable BGColor #ActiveRGB# "#RootConfig#\Volume"][!writeKeyValue Variables BGColor #ActiveRGB# "#RootConfigPath#Volume\spinal tap.ini"][!update "#RootConfig#\Volume"][!redraw]
rightMouseUpAction=[!commandMeasure mCalcRGB "RGBtoHSV('#BGColor#')"][!updateMeasure mCalcRGB]

[setNumbers]
meter=string
x=r
y=([setBG:H])r
w=([setBG:W])
h=([setBG:H])
text="Numbers"
clipstring=2
fontColor=#BGColor#
solidColor=#ShadedColor4#
stringAlign=LeftCenter
fontSize=#SettingsFontSize#
FontFace=#SettingsFontFace#
dynamicVariables=1
leftMouseUpAction=[!WriteKeyValue Variables numbersColor #ActiveRGB#][!SetVariable numbersColor #ActiveRGB#][!SetVariable numbersColor #ActiveRGB# "#RootConfig#\Volume"][!writeKeyValue Variables numbersColor #ActiveRGB# "#RootConfigPath#Volume\spinal tap.ini"][!update "#RootConfig#\Volume"][!redraw]
rightMouseUpAction=[!commandMeasure mCalcRGB "RGBtoHSV('#numbersColor#')"][!updateMeasure mCalcRGB]

[setOpacity]
meter=string
x=r
y=([setBG:H])r
w=([setBG:W])
h=([setBG:H])
text="Opacity"
clipstring=1
solidColor=ffffff
FontColor=000000
stringAlign=LeftCenter
fontSize=#SettingsFontSize#
FontFace=#SettingsFontFace#
dynamicVariables=1
MouseOverAction=[!SetOption #CURRENTSECTION# solidColor 200,200,200]
MouseLeaveAction=[!SetOption #CURRENTSECTION# solidColor 255,255,255]
leftMouseUpAction=[!ToggleMeter adjustAlpha]

[useWinColors]
text="System Colors"
leftMouseUpAction=[!SetVariable winColors 0][!SetVariable winColors 0 "#RootConfig#\Volume"][!WriteKeyValue Variables WinColors 0][!WriteKeyValue Variables WinColors 0 "#RootConfigPath#\Volume\spinal tap.ini"][!setOption WinColorsToggle meterStyle useCustomColors][!writeKeyValue WinColorsToggle meterStyle useCustomColors][!refresh "#RootConfig#\Volume"]

[useCustomColors]
text="User Colors"
leftMouseUpAction=[!SetVariable winColors 1][!SetVariable winColors 1 "#RootConfig#\Volume"][!WriteKeyValue Variables WinColors 1][!WriteKeyValue Variables WinColors 1 "#RootConfigPath#\Volume\spinal tap.ini"][!setOption WinColorsToggle meterStyle useWinColors][!writeKeyValue WinColorsToggle meterStyle useWinColors][!refresh "#RootConfig#\Volume"]

[WinColorsToggle]
meter=string
x=r
y=(([setOpacity:H]/2+([SatAndVal:Y]+[SatAndVal:H]-([setOpacity:Y]+[setOpacity:H]))/2))r
w=([setOpacity:W])
h=([SatAndVal:Y]+[SatAndVal:H]-([setOpacity:Y]+[setOpacity:H]))
dynamicVariables=1
meterStyle=useWinColors
clipstring=2
fontColor=0,0,0
solidColor=255,255,255
stringAlign=LeftCenter
fontSize=#SettingsFontSize#
FontFace=#SettingsFontFace#
MouseOverAction=[!SetOption #CURRENTSECTION# solidColor 200,200,200]
MouseLeaveAction=[!SetOption #CURRENTSECTION# solidColor 255,255,255]

[adjustAlpha]
meter=shape
dynamicVariables=1
X=([setOpacity:X]-[HexColor:W])
Y=[setOpacity:Y]
H=[setOpacity:H]
W=[HexColor:W]
hidden=1
Opacity=180 | ffffff ; 0 | ffffff ; (#bgAlpha#/255) | 787878 ; (#bgAlpha#/255) | 787878 ; 1
shape=Rectangle 0,0,([#CurrentSection#:W]),([#CurrentSection#:H]) | StrokeWidth 0 | fill Color 0,0,0,185
shape2=Line ([#CurrentSection#:W]*0.1),([#CurrentSection#:H]*0.5),([#CurrentSection#:W]*0.9),([#CurrentSection#:H]*0.5) | StrokeWidth ([#CurrentSection#:H]*0.2) | Stroke LinearGradient Opacity
LeftMouseUpAction=[!setVariable bgAlpha ((($MouseX$-([#CurrentSection#:W]*0.1))/([#CurrentSection#:W]*0.8)*255)<0?0:((($MouseX$-([#CurrentSection#:W]*0.1))/([#CurrentSection#:W]*0.8)*255)>255?255:round(($MouseX$-([#CurrentSection#:W]*0.1))/([#CurrentSection#:W]*0.8)*255)))][!SetVariable bgAlpha ((($MouseX$-([#CurrentSection#:W]*0.1))/([#CurrentSection#:W]*0.8)*255)<0?0:((($MouseX$-([#CurrentSection#:W]*0.1))/([#CurrentSection#:W]*0.8)*255)>255?255:round(($MouseX$-([#CurrentSection#:W]*0.1))/([#CurrentSection#:W]*0.8)*255))) "#RootConfig#\Volume"][!writeKeyValue Variables bgAlpha ((($MouseX$-([#CurrentSection#:W]*0.1))/([#CurrentSection#:W]*0.8)*255)<0?0:((($MouseX$-([#CurrentSection#:W]*0.1))/([#CurrentSection#:W]*0.8)*255)>255?255:round(($MouseX$-([#CurrentSection#:W]*0.1))/([#CurrentSection#:W]*0.8)*255))) "#ROOTCONFIGPATH#\Volume\#CurrentFile#"][!writeKeyValue Variables bgAlpha ((($MouseX$-([#CurrentSection#:W]*0.1))/([#CurrentSection#:W]*0.8)*255)<0?0:((($MouseX$-([#CurrentSection#:W]*0.1))/([#CurrentSection#:W]*0.8)*255)>255?255:round(($MouseX$-([#CurrentSection#:W]*0.1))/([#CurrentSection#:W]*0.8)*255)))][!Redraw "#RootConfig#\Volume"]
