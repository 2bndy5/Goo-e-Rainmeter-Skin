;Steam icon from http://store.edgecast.steamstatic.com/public/shared/images/header/globalheader_logo.png?t=962016
;Origin icon from https://eaassets04-a.akamaihd.net/origin-com-store-damassets/content/dam/OriginAsset/header-logo.png
[rainmeter]
update=250
defaultUpdateDivider=4
dynamicWindowSize=1
mouseLeaveAction=[!HideMeter LogoLabel]

[Variables]
SizeAlpha=0
InvertLoop=0
@include="#@##CurrentConfig#\Games\Variables.inc"

;;;;;;;;;;;;;;;;;;;;;;;
;Measures;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;

[mInputSize]
Measure=Plugin
Plugin=InputText
dynamicvariables=1
SolidColor=255,255,255
FontColor=0,0,0
FontFace=Arial
FontSize=(#IconSize#*16/256)
StringAlign=center
X=(#IconSize#-(#IconSize#*0.25))
y=(#IconSize#-(#IconSize#*0.25))
w=(#IconSize#*0.25)
h=(#IconSize#*0.25)
DynamicVariables=1
focusdismiss=1
DefaultValue="#IconSize#"
InputNumber=1
Command1=[!writekeyvalue variables IconSize "$UserInput$" "#@##CurrentConfig#\Games\Variables.inc"][!setVariable IconSize [#CurrentSection#]][!redraw]

[mMakeLibList]
Measure=string
updateDivider=-1
string="""#OriginDir0#" "#OriginDir1#" "#OriginDir2#" "#OriginDir3#" "#OriginDir4#""" 
dynamicvariables=1
substitute=' ""':""
onupdateAction=[!writeKeyValue Variables libList "[#CurrentSection#]" "#@##CurrentConfig#\Games\Variables.inc"][!setVariable libList "[#CurrentSection#]"]

[mSwitchLoop]
measure=loop
startValue=30
endValue=100
increment=10
updateDivider=1
DynamicVariables=1
invertMeasure=#InvertLoop#
LoopCount=1
ifequalValue=100
ifEqualAction=[!EnableMeasure ServiceChangeTrig]

[mPrevService]
measure=string
dynamicVariables=1
string=#CurrentFile#
regExpSubstitute=1
substitute="(.*)\-.*$":"\1"

[ServiceChangeTrig]
measure=String
dynamicVariables=1
disabled=1
string=#Service#
ifmatchmode=1
ifMatch=(?i)Steam|Retroarch
ifMatchAction=[!ActivateConfig "#CurrentConfig#" "#Service#-[mPrevService].ini"]

;;;;;;;;;;;;;;;;;;;;;;;;
;Meters~~~~~~~~~~~~~~~~~
;;;;;;;;;;;;;;;;;;;;;;;;

[OriginIcon]
meter=shape
dynamicVariables=1
updateDivider=1
x=0
y=0
w=(#iconSize#*([mSwitchLoop]/100))
h=(#iconSize#*([mSwitchLoop]/100))
RadGrad=([#CurrentSection#:W]*-0.1),([#CurrentSection#:H]*-0.25),0,0,([#CurrentSection#:W]*0.4),([#CurrentSection#:H]*0.4) | 255,153,0 ; 0.5 | 240,90,34 ; 1.0
shape=Ellipse ([#CurrentSection#:W]*0.5),([#CurrentSection#:H]*0.5),([#CurrentSection#:W]*0.5) | StrokeWidth 0 | Fill Color 0,0,0
shape2=Path PointUp | StrokeWidth 0 | Fill Color 255,153,0
shape3=Path PointDown | StrokeWidth 0 | Fill Color 240,90,34
shape4=Ellipse ([#CurrentSection#:W]*0.5),([#CurrentSection#:H]*0.5),([#CurrentSection#:W]*0.367) | StrokeWidth 0 | Fill RadialGradient1 RadGrad
shape5=Ellipse ([#CurrentSection#:W]*0.5),([#CurrentSection#:H]*0.5),([#CurrentSection#:W]*0.15)  | StrokeWidth 0 | Fill Color 000000
PointUp=([#CurrentSection#:W]*0.52),([#CurrentSection#:H]*0.25) | CurveTo ([#CurrentSection#:W]*0.52),0,([#CurrentSection#:W]*0.37),([#CurrentSection#:H]*0.18) | CurveTo ([#CurrentSection#:W]*0.14),([#CurrentSection#:H]*0.5),([#CurrentSection#:W]*0.14),([#CurrentSection#:H]*0.22) | ClosePath 1
PointDown=([#CurrentSection#:W]*0.48),([#CurrentSection#:H]*0.75) | CurveTo ([#CurrentSection#:W]*0.48),[#CurrentSection#:H],([#CurrentSection#:W]*0.63),([#CurrentSection#:H]*0.82) | CurveTo ([#CurrentSection#:W]*0.86),([#CurrentSection#:H]*0.5),([#CurrentSection#:H]*0.86),([#CurrentSection#:H]*0.78) | ClosePath 1
;shape6=Combine Shape4 | Exclude shape5 | Union shape2 | Union shape3
;Radial Gradients don't seem to work on combined shapes
Group=Icons
LeftMouseDoubleClickAction=[origin://]
leftMouseUpAction=[!ActivateConfig "#CurrentConfig#\Games" "Games.ini"]
mouseOverAction=[!setOption LogoLabel meterStyle originLabel][!showMeter LogoLabel][!redraw]

[SteamIcon]
meter=shape
dynamicVariables=1
updateDivider=1
x=0
y=0
w=(#iconSize#*(1-([mSwitchLoop]/100)+0.3))
h=(#iconSize#*(1-([mSwitchLoop]/100)+0.3))
LeftLeg=0,([#CurrentSection#:H]*0.455) | LineTo ([#CurrentSection#:W]*0.38),([#CurrentSection#:H]*0.612) | ArcTo ([#CurrentSection#:W]*0.316),([#CurrentSection#:H]*0.75) | LineTo 0,([#CurrentSection#:H]*0.62) | ClosePath 1
RightLeg=([#CurrentSection#:W]*0.347),([#CurrentSection#:H]*0.56) | LineTo ([#CurrentSection#:W]*0.49),([#CurrentSection#:H]*0.35) | LineTo ([#CurrentSection#:W]*0.675),([#CurrentSection#:H]*0.54) | LineTo ([#CurrentSection#:W]*0.469),([#CurrentSection#:H]*0.69) | ClosePath 1
SteamGradient=-90 | 1384b5 ; 1.0 | 143c6f ; 0.6 | 0f204f ; 0.4
shape=Ellipse ([#CurrentSection#:W]*0.66),([#CurrentSection#:H]*0.372),([#CurrentSection#:W]*0.092) | StrokeWidth 0
shape2=Ellipse ([#CurrentSection#:W]*0.66),([#CurrentSection#:H]*0.372),([#CurrentSection#:W]*0.125) | StrokeWidth 0
shape3=Ellipse ([#CurrentSection#:W]*0.66),([#CurrentSection#:H]*0.372),([#CurrentSection#:W]*0.186) | StrokeWidth 0
shape4=Ellipse ([#CurrentSection#:W]*0.35),([#CurrentSection#:H]*0.682),([#CurrentSection#:W]*0.104) | StrokeWidth 0
shape5=Ellipse ([#CurrentSection#:W]*0.35),([#CurrentSection#:H]*0.682),([#CurrentSection#:W]*0.14) | StrokeWidth 0
shape6=path LeftLeg | StrokeWidth 0
shape7=Path RightLeg | StrokeWidth 0
Shape8=Ellipse ([#CurrentSection#:W]*0.5),([#CurrentSection#:H]*0.5),([#CurrentSection#:W]*0.5) | Fill Color 000000 | StrokeWidth 0
shape9=Ellipse ([#CurrentSection#:W]*0.5),([#CurrentSection#:H]*0.5),([#CurrentSection#:W]*0.5) | StrokeWidth 0 | Fill LinearGradient SteamGradient
shape10=Combine shape3 | Union shape7 | Union shape5 | Exclude shape2 | Exclude Shape4 | Union shape1 | Union shape6 | Intersect shape8
Group=Icons
LeftMouseUpAction=[!writeKeyValue Variables Service Steam "#@##CurrentConfig#\Games\Variables.inc"][!setVariable Service Steam]
mouseOverAction=[!setOption LogoLabel meterStyle steamLabel][!showMeter LogoLabel][!redraw]
mouseLeaveAction=[!setOption LogoLabel meterStyle originLabel][!redraw]
rightmouseupaction=[steam://open/musicplayer/]

[RetroarchIcon]
meter=shape
dynamicVariables=1
updateDivider=1
x=(#iconSize#*0.7)
w=(#iconSize#*0.3)
h=(#iconSize#*0.3)
bodyGradient=90 | 0,0,0 ; 0 | 2,128,24 ; 1
outline=90 | 255,213,0 ; 0 | 196,158,7 ; 1
body=([#CurrentSection#:W]*0.225),([#CurrentSection#:H]*0.325) | LineTo ([#CurrentSection#:W]*0.775),([#CurrentSection#:H]*0.325) | LineTo ([#CurrentSection#:W]*0.853),([#CurrentSection#:H]*0.636) | LineTo ([#CurrentSection#:W]*0.147),([#CurrentSection#:H]*0.636)
xShape=([#CurrentSection#:W]*0.29),([#CurrentSection#:H]*0.246) | LineTo ([#CurrentSection#:W]*0.374),([#CurrentSection#:H]*0.246) | LineTo ([#CurrentSection#:W]*0.5),([#CurrentSection#:H]*0.39) | LineTo ([#CurrentSection#:W]*0.626),([#CurrentSection#:H]*0.246) | LineTo ([#CurrentSection#:W]*0.71),([#CurrentSection#:H]*0.246) | LineTo ([#CurrentSection#:W]*0.55),([#CurrentSection#:H]*0.444) | LineTo ([#CurrentSection#:W]*0.815),([#CurrentSection#:H]*0.753) | LineTo ([#CurrentSection#:W]*0.703),([#CurrentSection#:H]*0.753) | LineTo ([#CurrentSection#:W]*0.5),([#CurrentSection#:H]*0.51) | LineTo ([#CurrentSection#:W]*0.297),([#CurrentSection#:H]*0.753) | LineTo ([#CurrentSection#:W]*0.185),([#CurrentSection#:H]*0.753) | LineTo ([#CurrentSection#:W]*0.45),([#CurrentSection#:H]*0.444)
arms=([#CurrentSection#:W]*0.07),([#CurrentSection#:H]*0.325) | LineTo ([#CurrentSection#:W]*0.15),([#CurrentSection#:H]*0.325) | LineTo ([#CurrentSection#:W]*0.12),([#CurrentSection#:H]*0.442) | LineTo ([#CurrentSection#:W]*0.881),([#CurrentSection#:H]*0.442) | LineTo ([#CurrentSection#:W]*0.851),([#CurrentSection#:H]*0.325) | LineTo ([#CurrentSection#:W]*0.93),([#CurrentSection#:H]*0.325) | LineTo ([#CurrentSection#:W]*0.988),([#CurrentSection#:H]*0.5585) | LineTo ([#CurrentSection#:W]*0.012),([#CurrentSection#:H]*0.5585)
shape=path body | Fill LinearGradient bodyGradient | stroke LinearGradient outline  | strokeWidth ([#CurrentSection#:H]*0.022)
shape2=path xShape
shape3=path arms
shape4=Rectangle ([#CurrentSection#:W]*0.298),([#CurrentSection#:H]*0.3995),([#CurrentSection#:W]*0.083),([#CurrentSection#:H]*0.083)
shape5=Rectangle ([#CurrentSection#:W]*0.621),([#CurrentSection#:H]*0.3995),([#CurrentSection#:W]*0.083),([#CurrentSection#:H]*0.083)
shape6=combine shape | union shape2 | union shape3 | exclude shape4 | exclude shape5
shape7=Rectangle 0,0,[#CurrentSection#:W],[#CurrentSection#:H] | fill color 0,0,0,1 | strokewidth 0
Group=Icons
leftMouseUpAction=[!writeKeyValue Variables Service Retroarch "#@##CurrentConfig#\Games\Variables.inc"][!setVariable Service Retroarch]
mouseOverAction=[!setOption LogoLabel meterStyle RetroarchLabel][!showMeter LogoLabel][!redraw]
mouseLeaveAction=[!setOption LogoLabel meterStyle steamLabel][!redraw]

[LogoLabel]
meter=string
greyscale=1
x=(#IconSize#*0.5)
y=(#IconSize#)
; h=(#IconSize#*0.4)
; w=(#IconSize#)
solidColor=38,38,38,185
solidColor2=135,135,135,185
gradientAngle=-90
stringAlign=CenterBottom
FontFace=Arial
clipString=2
DynamicVariables=1
fontColor=255,153,0
meterStyle=SteamLabel
hidden=1

[OriginLabel]
text=Origin
FontSize=(#IconSize#*36/256)

[SteamLabel]
text=Steam
FontSize=(#IconSize#*36/256)

[RetroarchLabel]
text="Retroarch"
FontSize=(#IconSize#*32/256)

[SetSize]
meter=shape
DynamicVariables=1
X=(#IconSize#*0.75)
y=(#IconSize#*0.75)
w=(#IconSize#*0.25)
h=(#IconSize#*0.25)
ButtAttributes=StrokeWidth ((([#CurrentSection#:W]+[#CurrentSection#:H])/2)*0.065) | StrokeColor 255,255,255,#SizeAlpha# | Fill Color 0,0,0,1
shape=Line ([#CurrentSection#:W]*0.835),([#CurrentSection#:H]*0.16),([#CurrentSection#:W]*0.15),([#CurrentSection#:H]*0.845) | Extend ButtAttributes | StrokeStartCap Triangle | StrokeEndCap Triangle
shape2=Path ArrowBottom | Extend ButtAttributes
ArrowBottom=([#CurrentSection#:W]*0.095),([#CurrentSection#:H]*0.62) | LineTo ([#CurrentSection#:W]*0.095),([#CurrentSection#:H]*0.895) | LineTo ([#CurrentSection#:W]*0.38),([#CurrentSection#:H]*0.895)
shape3=path ArrowTop | Extend ButtAttributes
ArrowTop=([#CurrentSection#:W]*0.61),([#CurrentSection#:H]*0.1075) | LineTo ([#CurrentSection#:W]*0.885),([#CurrentSection#:H]*0.1075) | LineTo ([#CurrentSection#:W]*0.885),([#CurrentSection#:H]*0.385)
shape4=Rectangle 0,0,[#CurrentSection#:W],[#CurrentSection#:H] | StrokeWidth 0 | Fill Color 0,0,0,1
MouseOverAction=[!setVariable SizeAlpha 255][!redraw]
MouseLeaveAction=[!setVariable SizeAlpha 0][!redraw]
leftmouseupaction=[!commandmeasure mInputSize "executebatch 1"]
